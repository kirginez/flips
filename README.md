# Flips

ะะตะฑ-ะฟัะธะปะพะถะตะฝะธะต ะดะปั ะธะทััะตะฝะธั ะฐะฝะณะปะธะนัะบะธั ัะปะพะฒ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะบะฐััะพัะตะบ ะธ ะฐะปะณะพัะธัะผะฐ ะธะฝัะตัะฒะฐะปัะฝะพะณะพ ะฟะพะฒัะพัะตะฝะธั (spaced repetition).

## ะขะตัะฝะพะปะพะณะธะธ

**Backend:**
- Python 3.13+
- FastAPI
- SQLModel (SQLite)
- JWT ะฐััะตะฝัะธัะธะบะฐัะธั
- Reverso API ะดะปั ะฟะตัะตะฒะพะดะพะฒ

**Frontend:**
- React 19 + TypeScript
- Vite
- React Router
- Tailwind CSS
- Axios

## ะัััััะน ััะฐัั

### 1. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
# Backend (ะฒะฐัะธะฐะฝั 1: ัะตัะตะท uv)
cd backend
uv sync

# Backend (ะฒะฐัะธะฐะฝั 2: ัะตัะตะท pip ะธ ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต)
cd backend
python3 -m venv .venv
source .venv/bin/activate  # ะะฐ Windows: .venv\Scripts\activate
pip install --upgrade pip
pip install -r requirements.txt

# Frontend
cd ../frontend
npm install
```

### 2. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะกะบะพะฟะธััะนัะต `.env.template` ะฒ `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:

```bash
cp .env.template .env
```

ะััะตะดะฐะบัะธััะนัะต `.env` ะธ ัะบะฐะถะธัะต ัะฒะพะธ ะทะฝะฐัะตะฝะธั:
- `SECRET_KEY` - ัะตะบัะตัะฝัะน ะบะปัั ะดะปั JWT (ัะณะตะฝะตัะธััะนัะต ัะปััะฐะนะฝัั ัััะพะบั)
- `ALGORITHM` - ะฐะปะณะพัะธัะผ ัะธััะพะฒะฐะฝะธั (ะฟะพ ัะผะพะปัะฐะฝะธั HS256)
- `ACCESS_TOKEN_EXPIRE_HOURS` - ะฒัะตะผั ะถะธะทะฝะธ ัะพะบะตะฝะฐ ะฒ ัะฐัะฐั

### 2.1. ะะฐัััะพะนะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

ะฃะฑะตะดะธัะตัั, ััะพ ัะฐะนะป `backend/users.json` ัััะตััะฒัะตั ะธ ัะพะดะตัะถะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน. ะัะธะผะตั:

```json
[
    {
        "username": "admin",
        "hashed_password": "...",
        "bonus": 1.05,
        "punishment": 0.8,
        "new_limit": 20,
        "due_limit": 200
    }
]
```

### 3. ะกะฑะพัะบะฐ ััะพะฝัะตะฝะดะฐ (ะพะฑัะทะฐัะตะปัะฝะพ ะฟะตัะตะด ะทะฐะฟััะบะพะผ)

```bash
cd frontend
npm run build
```

### 4. ะะฐะฟััะบ

ะะฐะฟัััะธัะต backend ะธะท ะดะธัะตะบัะพัะธะธ `backend`:

```bash
cd backend
uv run uvicorn main:app --host 0.0.0.0 --port 8080
```

ะัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ ะฟะพ ะฐะดัะตัั: http://localhost:8080

**ะะฐะถะฝะพ:** ะคัะพะฝัะตะฝะด ะดะพะปะถะตะฝ ะฑััั ัะพะฑัะฐะฝ ะฟะตัะตะด ะทะฐะฟััะบะพะผ backend, ะธะฝะฐัะต ะฑัะดะตั ะฟะพะบะฐะทะฐะฝะพ ัะพะปัะบะพ API ะฑะตะท ะธะฝัะตััะตะนัะฐ.

## ะะฐะทัะฐะฑะพัะบะฐ

ะะปั ัะฐะทัะฐะฑะพัะบะธ backend ะทะฐะฟัััะธัะต ั ัะปะฐะณะพะผ `--reload`:

```bash
cd backend
uv run uvicorn main:app --reload --host 127.0.0.1 --port 8080
```

ะัะธ ะธะทะผะตะฝะตะฝะธะธ ััะพะฝัะตะฝะดะฐ ะฟะตัะตัะพะฑะตัะธัะต ะตะณะพ:

```bash
cd frontend
npm run build
```

Backend ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะดัะฒะฐัะธั ะธะทะผะตะฝะตะฝะธั ะฟะพัะปะต ะฟะตัะตะทะฐะฟััะบะฐ.

## ะะตะฟะปะพะน

### ะััััะฐั ัััะฐะฝะพะฒะบะฐ ะฝะฐ ัะตัะฒะตั (ะฟะพะปะฝะพัััั ะฐะฒัะพะผะฐัะธัะตัะบะฐั)

```bash
# 1. ะกะบะพะฟะธััะนัะต ะฟัะพะตะบั ะฝะฐ ัะตัะฒะตั

# 2. ะะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ัะพะทะดะฐะนัะต .env ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ)
cp .env.template .env
nano .env  # ะััะตะดะฐะบัะธััะนัะต ะฟะพ ะฝะตะพะฑัะพะดะธะผะพััะธ

# 3. ะฃะฑะตะดะธัะตัั, ััะพ backend/users.json ัััะตััะฒัะตั ั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ

# 4. ะะฐะฟัััะธัะต ะฐะฒัะพะผะฐัะธัะตัะบัั ัััะฐะฝะพะฒะบั (ะดะตะปะฐะตั ะฒัั ัะฐะผ)
./install.sh
```

ะกะบัะธะฟั `install.sh` ะฐะฒัะพะผะฐัะธัะตัะบะธ:
- โ ะฃััะฐะฝะพะฒะธั ะทะฐะฒะธัะธะผะพััะธ backend (ัะพะทะดะฐัั venv, ัััะฐะฝะพะฒะธั ะฟะฐะบะตัั)
- โ ะฃััะฐะฝะพะฒะธั ะทะฐะฒะธัะธะผะพััะธ frontend (npm install)
- โ ะกะพะฑะตััั frontend (npm run build)
- โ ะะฐัััะพะธั ะธ ะทะฐะฟัััะธั systemd ัะตัะฒะธั

### ะะฐะฟััะบ ัะตัะตะท systemd (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ)

**ะัะปะธ ัะพัะธัะต ะฝะฐัััะพะธัั ัะพะปัะบะพ systemd ัะตัะฒะธั (ะฟะพัะปะต ัััะฐะฝะพะฒะบะธ ะทะฐะฒะธัะธะผะพััะตะน):**
```bash
./setup-service.sh
```

**ะะปะธ ะฒัััะฝัั:**

   **ะะปะธ ะฒัััะฝัั ัะตัะตะท manage-service.sh:**
   ```bash
   # ะกะฝะฐัะฐะปะฐ ะพััะตะดะฐะบัะธััะนัะต flips.service, ัะบะฐะทะฐะฒ ะฟัะฐะฒะธะปัะฝัะต ะฟััะธ
   nano flips.service
   # ะะฐัะตะผ ัััะฐะฝะพะฒะธัะต
   ./manage-service.sh install
   sudo systemctl start flips.service
   ```

   **ะะปะธ ะฟะพะปะฝะพัััั ะฒัััะฝัั:**
   ```bash
   # ะกะบะพะฟะธััะนัะต ัะฐะนะป ัะตัะฒะธัะฐ ะฒ systemd
   sudo cp flips.service /etc/systemd/system/

   # ะะฑะฝะพะฒะธัะต ะฟััะธ ะฒ ัะฐะนะปะต, ะตัะปะธ ะพะฝะธ ะพัะปะธัะฐัััั ะพั ะฒะฐัะธั
   sudo nano /etc/systemd/system/flips.service

   # ะะตัะตะทะฐะณััะทะธัะต systemd
   sudo systemctl daemon-reload

   # ะะบะปััะธัะต ะฐะฒัะพะทะฐะฟััะบ ะฟัะธ ะทะฐะณััะทะบะต ัะธััะตะผั
   sudo systemctl enable flips.service

   # ะะฐะฟัััะธัะต ัะตัะฒะธั
   sudo systemctl start flips.service

   # ะัะพะฒะตัััะต ััะฐััั
   sudo systemctl status flips.service
   ```

5. ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะตัะฒะธัะพะผ:

   **ะงะตัะตะท ัะบัะธะฟั (ัะดะพะฑะฝะตะต):**
   ```bash
   ./manage-service.sh start      # ะะฐะฟัััะธัั
   ./manage-service.sh stop       # ะััะฐะฝะพะฒะธัั
   ./manage-service.sh restart    # ะะตัะตะทะฐะฟัััะธัั
   ./manage-service.sh status     # ะกัะฐััั
   ./manage-service.sh logs       # ะะพะณะธ
   ./manage-service.sh uninstall  # ะฃะดะฐะปะธัั
   ```

   **ะะปะธ ะฝะฐะฟััะผัั ัะตัะตะท systemctl:**
   ```bash
   # ะััะฐะฝะพะฒะธัั
   sudo systemctl stop flips.service

   # ะะตัะตะทะฐะฟัััะธัั
   sudo systemctl restart flips.service

   # ะะพัะผะพััะตัั ะปะพะณะธ
   sudo journalctl -u flips.service -f

   # ะัะบะปััะธัั ะฐะฒัะพะทะฐะฟััะบ
   sudo systemctl disable flips.service
   ```

### ะััะฝะพะน ะทะฐะฟััะบ (ะดะปั ัะตััะธัะพะฒะฐะฝะธั)

**ะก ะฒะธัััะฐะปัะฝัะผ ะพะบััะถะตะฝะธะตะผ:**
```bash
cd backend
source .venv/bin/activate  # ะะฐ Windows: .venv\Scripts\activate
uvicorn main:app --host 0.0.0.0 --port 8080
```

**ะะปะธ ัะตัะตะท ัะบัะธะฟั (ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั/ะฐะบัะธะฒะธััะตั venv):**
```bash
cd backend
./start.sh
```

**ะัะปะธ ะธัะฟะพะปัะทัะตัะต uv:**
```bash
cd backend
uv run uvicorn main:app --host 0.0.0.0 --port 8080
```

### ะะปััะตัะฝะฐัะธะฒะฝัะต ัะฟะพัะพะฑั ะทะฐะฟััะบะฐ ะฒ ัะพะฝะต

**ะงะตัะตะท screen:**
```bash
screen -S flips
cd backend
uv run uvicorn main:app --host 0.0.0.0 --port 8080
# ะะฐะถะผะธัะต Ctrl+A, ะทะฐัะตะผ D ะดะปั ะพััะพะตะดะธะฝะตะฝะธั
# ะะตัะฝััััั: screen -r flips
```

**ะงะตัะตะท nohup:**
```bash
cd backend
nohup uv run uvicorn main:app --host 0.0.0.0 --port 8080 > ../flips.log 2>&1 &
```

Backend ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฐะทะดะฐัั ัะพะฑัะฐะฝะฝัะน ััะพะฝัะตะฝะด ะธะท `frontend/dist/`.

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
flips/
โโโ backend/          # FastAPI backend
โ   โโโ app/
โ   โ   โโโ api/      # API endpoints
โ   โ   โโโ core/     # ะะพะฝัะธะณััะฐัะธั, ะะ, ะฑะตะทะพะฟะฐัะฝะพััั
โ   โ   โโโ models/   # ะะพะดะตะปะธ ะดะฐะฝะฝัั
โ   โ   โโโ repositories/  # ะะตะฟะพะทะธัะพัะธะธ ะดะปั ัะฐะฑะพัั ั ะดะฐะฝะฝัะผะธ
โ   โโโ main.py       # ะขะพัะบะฐ ะฒัะพะดะฐ
โโโ frontend/         # React frontend
โ   โโโ src/
โ   โ   โโโ api/      # API ะบะปะธะตะฝั
โ   โ   โโโ components/  # React ะบะพะผะฟะพะฝะตะฝัั
โ   โ   โโโ pages/    # ะกััะฐะฝะธัั ะฟัะธะปะพะถะตะฝะธั
โ   โ   โโโ utils/    # ะฃัะธะปะธัั
โ   โโโ package.json
โโโ .env.template     # ะจะฐะฑะปะพะฝ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
โโโ README.md
```

## ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

- ๐ ะะทััะตะฝะธะต ัะปะพะฒ ะฟะพ ะบะฐััะพัะบะฐะผ ั ะธะฝัะตัะฒะฐะปัะฝัะผ ะฟะพะฒัะพัะตะฝะธะตะผ
- ๐ ะัััััะน ะฟะตัะตะฒะพะด ัะตัะตะท Reverso API
- ๐ ะกัะฐัะธััะธะบะฐ ะพะฑััะตะฝะธั
- โ๏ธ ะะฐัััะพะนะบะธ ะปะธะผะธัะพะฒ ะธ ะฟะฐัะฐะผะตััะพะฒ ะพะฑััะตะฝะธั
- ๐ JWT ะฐััะตะฝัะธัะธะบะฐัะธั

## ะขัะตะฑะพะฒะฐะฝะธั

- Python 3.13+
- Node.js 18+
- uv (ะผะตะฝะตะดะถะตั ะฟะฐะบะตัะพะฒ Python)
- npm ะธะปะธ yarn
